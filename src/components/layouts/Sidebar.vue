<template>
    <div class="col-md-3 side-bar">
        <div class="panel panel-default corner-radius sidebar-resources">
            <div class="panel-heading text-center">
                <h3 class="panel-title">å®æˆ˜è¯¾ç¨‹</h3>
            </div>
            <div class="panel-body">
                <Slider :slides="slides">
                    <template slot-scope="{ currentSlide }">
                        <a :href="currentSlide.link" target="_blank">
                            <img :src="currentSlide.img" :alt="currentSlide.title" :title="currentSlide.title">
                        </a>
                    </template>
                </Slider>
            </div>
        </div>

        <!-- æ´»è·ƒç”¨æˆ· -->
        <div class="panel panel-default corner-radius panel-active-users">
            <div class="panel-heading text-center">
                <h3 class="panel-title">æ´»è·ƒç”¨æˆ·</h3>
            </div>
            <div class="panel-body">
                <div class="users-label">
                    <router-link v-for="(user, index) in activeUsers" :key="index" :to="`/${user.name}`" class="users-label-item">
                        <img :src="user.avatar" alt="" class="avatar-small inline-block">
                        {{ user.name }}
                    </router-link>
                </div>
            </div>
        </div>

        <!-- ä¸ƒå¤©å†…æœ€çƒ­ -->
        <div class="panel panel-default corner-radius panel-hot-topics">
            <div class="panel-heading text-center">
                <h3 class="panel-title">ä¸ƒå¤©å†…æœ€çƒ­</h3>
            </div>
            <div class="panel-body">
                <ul class="list">
                    <li v-for="(article, index) in hotArticles" :key="index">
                        <router-link :to="`/articles/${article.articleId}/content`">
                            <span v-if="index === 0">ğŸ†</span>
                            <span v-else>{{ index + 1 }}.</span>
                            {{ article.title }}
                        </router-link>
                    </li>
                </ul>
            </div>
        </div>

        <!-- å…¶ä»–å†…å®¹ -->
        <div class="other">
            <div class="panel panel-default corner-radius sidebar-resources">
                <div class="panel-heading text-center">
                    <h3 class="panel-title">æ¨èèµ„æº</h3>
                </div>
                <div class="panel-body">
                    <ul class="list list-group">
                        <li v-for="(item, index) in resources" :key="index" class="list-group-item">
                            <a :href="item.link" target="_blank">
                                <img src="https://cdn.learnku.com/uploads/sites/fcxJFYjEMaLQt4Oi1x6ZNkcqvwIVHbfy.png" alt="" class="media-object inline-block">
                                {{ item.title }}
                            </a>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="panel panel-default corner-radius">
                <div class="panel-body text-center">
                    <a href="mailto:hug.m@foxmail.com" style="color: #a5a5a5">
                        <span style="margin-top: 7px; display: inline-block;">
                            <i class="fa fa-heard" style="color: rgba(232, 146, 136, 0.89);"></i>
                            å»ºè®®åé¦ˆï¼Ÿè¯·ç§ä¿¡ç¿Ÿå®‡é‘«
                        </span>
                    </a>
                </div>
            </div>
        </div>
    </div>
</template>

<script>
    export default {
        name: 'Sidebar',
        data() {
            return {
                // å®æˆ˜è¯¾ç¨‹
                slides: [
                    {
                        title: 'ã€ŠL01 Laravel æ•™ç¨‹ - Web å¼€å‘å®æˆ˜å…¥é—¨ã€‹',
                        img: 'https://cdn.learnku.com/uploads/images/201810/26/1/MYg2QNQfss.png',
                        link: 'https://learnku.com/courses/laravel-essential-training'
                    },
                    {
                        title: 'ã€ŠL02 Laravel æ•™ç¨‹ - Web å¼€å‘å®æˆ˜è¿›é˜¶ã€‹',
                        img: 'https://cdn.learnku.com/uploads/images/201810/26/1/Eya5MlZCuH.png',
                        link: 'https://learnku.com/courses/laravel-intermediate-training'
                    },
                    {
                        title: 'ã€ŠL03 Laravel æ•™ç¨‹ - å®æˆ˜æ„æ¶ API æœåŠ¡å™¨ã€‹',
                        img: 'https://cdn.learnku.com/uploads/images/201810/26/1/LEJyMUoXVQ.png',
                        link: 'https://learnku.com/courses/laravel-advance-training'
                    },
                    {
                        title: 'ã€ŠL04 Laravel æ•™ç¨‹ - å¾®ä¿¡å°ç¨‹åºä»é›¶åˆ°å‘å¸ƒã€‹',
                        img: 'https://cdn.learnku.com/uploads/images/201810/26/1/YtwiopnTgn.png',
                        link: 'https://learnku.com/courses/laravel-weapp'
                    },
                    {
                        title: 'ã€ŠL05 Laravel æ•™ç¨‹ - ç”µå•†å®æˆ˜ã€‹',
                        img: 'https://cdn.learnku.com/uploads/images/201810/26/1/mj8qSkmZzw.png',
                        link: 'https://learnku.com/courses/laravel-shop'
                    },
                    {
                        title: 'ã€ŠL06 Laravel æ•™ç¨‹ - ç”µå•†è¿›é˜¶ã€‹',
                        img: 'https://cdn.learnku.com/uploads/images/201810/26/1/lto59p5rEM.png',
                        link: 'https://learnku.com/courses/ecommerce-advance'
                    },
                    {
                        title: 'ã€ŠLX1 Laravel / PHP æ‰©å±•åŒ…è§†é¢‘æ•™ç¨‹ã€‹',
                        img: 'https://cdn.learnku.com/uploads/images/201808/06/1/S5h9WvQSk4.png',
                        link: 'https://learnku.com/courses/laravel-package'
                    },
                    {
                        title: 'ã€ŠLX2 PHP æ‰©å±•åŒ…å®æˆ˜æ•™ç¨‹ - ä»å…¥é—¨åˆ°å‘å¸ƒã€‹',
                        img: 'https://cdn.learnku.com/uploads/images/201807/23/1/NCEii0F1bc.png!/both/400x400',
                        link: 'https://learnku.com/courses/creating-package'
                    },
                    {
                        title: 'ã€ŠLX3 Laravel æ€§èƒ½ä¼˜åŒ–å…¥é—¨ã€‹',
                        img: 'https://cdn.learnku.com/uploads/images/201906/17/1/rIC2Vg4qYB.jpg!/both/400x400',
                        link: 'https://learnku.com/courses/laravel-performance'
                    },
                    {
                        title: 'ã€ŠV01 Vue.js å®æˆ˜æ•™ç¨‹ - åŸºç¡€ç¯‡ã€‹',
                        img: 'https://cdn.learnku.com/uploads/images/201901/29/1/I2x4n8kWIB.png',
                        link: 'https://learnku.com/courses/vuejs-essential'
                    }
                ],
                activeUsers: [],    // æ´»è·ƒç”¨æˆ·
                hotArticles: [],
                // æ¨èèµ„æº
                resources: [
                    {
                        title: 'Vue å®˜æ–¹æ•™ç¨‹',
                        link: 'https://vuejscaff.com/v2/guide/',
                    },
                    {
                        title: 'Vuex å®˜æ–¹æ•™ç¨‹',
                        link: 'https://vuex.vuejs.org/zh/',
                    },
                    {
                        title: 'Vue Router å®˜æ–¹æ•™ç¨‹',
                        link: 'https://router.vuejs.org/zh-cn/',
                    },
                    {
                        title: 'Vue Loader å®˜æ–¹æ•™ç¨‹',
                        link: 'https://vue-loader.vuejs.org/zh-cn/',
                    },
                    {
                        title: 'Vue ç‰¹æœ‰ä»£ç çš„é£æ ¼æŒ‡å—',
                        link: 'https://vuejscaff.com/v2/style-guide/',
                    }
                ]
            }
        },
        // åœ¨å®ä¾‹åˆ›å»ºå®Œæˆå
        created() {
            // é€šè¿‡ axios æ‰§è¡Œ GET è¯·æ±‚æ¥è¿”å›æ´»è·ƒç”¨æˆ·
            this.$axios.get('/users/active').then((response) => {
                // åœ¨æˆåŠŸçš„å›è°ƒé‡Œï¼Œä» response.data è·å–è¿”å›æ•°æ®
                this.activeUsers = response.data
            })

            // é€šè¿‡ axios æ‰§è¡Œ POST è¯·æ±‚æ¥è¿”å›ä¸ƒå¤©å†…æœ€çƒ­æ–‡ç« ï¼Œå¯ä»¥ä¼ é€’ num æ¥æŒ‡å®šè¿”å›æ¡æ•°
            this.$axios.post('/articles/hot', { num: 10 }).then((response) => {
                this.hotArticles = response.data
            })
        }
    }
</script>

<style scoped>
    .carousel-inner img {
        display: block;
        margin: auto;
        line-height: 1;
        width: 70%;
        border: 1px solid #ddd;
        box-shadow: 0 0 10px #ccc;
        -moz-box-shadow: 0 0 10px #ccc;
        -webkit-box-shadow: 0 0 10px #ccc;
    }
</style>